---
interface Props {
  type?: 'horizontal' | 'in-article' | 'sidebar' | 'responsive';
  slot?: string;
}

const { type = 'responsive', slot = '' } = Astro.props;

const sizes = {
  horizontal: { width: 728, height: 90 },
  'in-article': { width: 336, height: 280 },
  sidebar: { width: 300, height: 250 },
  responsive: { width: 'auto', height: 'auto' }
};

const size = sizes[type];
const isResponsive = type === 'responsive';
---

<div class="ad-container" data-ad-type={type}>
  <ins 
    class="adsbygoogle"
    style={isResponsive 
      ? 'display:block;' 
      : `display:inline-block;width:${size.width}px;height:${size.height}px;`
    }
    data-ad-client="ca-pub-9514930752765161"
    data-ad-slot={slot}
    data-ad-format={isResponsive ? 'auto' : undefined}
    data-full-width-responsive={isResponsive ? 'true' : undefined}
  />
</div>

<script>
  // AdSense 초기화
  try {
    (window.adsbygoogle = window.adsbygoogle || []).push({});
  } catch (e) {
    console.log('AdSense not loaded');
  }
</script>

<style>
  .ad-container {
    display: flex;
    justify-content: center;
    margin: 24px 0;
    min-height: 100px;
    background: var(--chip);
    border-radius: var(--radius-md);
    overflow: hidden;
  }
  
  .ad-container[data-ad-type="horizontal"] {
    min-height: 90px;
  }
  
  .ad-container[data-ad-type="in-article"] {
    min-height: 280px;
  }
  
  .ad-container[data-ad-type="sidebar"] {
    min-height: 250px;
  }
  
  @media (max-width: 768px) {
    .ad-container[data-ad-type="horizontal"] {
      display: none; /* 모바일에서 수평 광고 숨김 */
    }
  }
</style>

